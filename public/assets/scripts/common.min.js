var Tinycar;!function(t){var i;!function(i){function e(t,i){return this.eventList.hasOwnProperty(t)?(i.preventDefault(),this.eventList[t].forEach(function(t){t instanceof Function&&t(i)}),!0):void 0}function n(t,i){this.eventList.hasOwnProperty(t)||(this.eventList[t]=[]);var e=this.eventList[t].length;return this.eventList[t].push(i),e}function o(){return this.initListeners(),this.buildRoot(),t.Page.build(),this.Mask=new t.Main.Mask,this.Toast=new t.Main.Toast,this.htmlRoot.append(this.Toast.build()),this.openApplication(t.Url.getParam("app")),this.htmlRoot}function a(i){t.Config.load(i.config),t.Url.load(i.params),t.Api.setApiUrl(t.Config.get("API_PATH")),t.Locale.loadCalendar(i.calendar),t.Locale.loadText(i.text),t.User.load(i.user)}function s(){this.htmlRoot=$("<div>").attr("id","tinycar-root")}function r(t,i){this.eventList[t][i]=null}function l(){var t=this;$(window).keydown(function(i){i.ctrlKey&&!i.shiftKey&&83===i.keyCode&&t.callEvent("ctrl+s",i)}),$(window).resize(function(i){t.callEvent("resize",i)})}function h(){return t.Config.get("UI_LOGIN")===!0&&t.User.hasAuthenticated()===!1}function p(i){var e=t.Url.getParam("view");this.isLoginRequired()&&(i=t.Config.get("APP_LOGIN"));var n=new t.Ui.Application(i);this.htmlRoot.append(n.build()),n.loadView(e)}i.appList={},i.eventList={},i.callEvent=e,i.addEvent=n,i.build=o,i.load=a,i.buildRoot=s,i.clearEvent=r,i.initListeners=l,i.isLoginRequired=h,i.openApplication=p}(i=t.System||(t.System={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){function e(i){var e={api_id:++this.requestId,api_service:i.service};i.hasOwnProperty("params")&&jQuery.extend(e,i.params),$.ajax({type:"POST",url:this.apiUrl,dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",success:function(e){e.hasOwnProperty("result")?i.success(e.result):e.hasOwnProperty("error")&&(t.System.Toast.setMessage({type:"failure",vars:e.error.message,text:t.Locale.getText("toast_"+e.error.code)}),t.System.Toast.show())},error:function(t){console.log(t)}})}function n(t){this.apiUrl=t}i.requestId=0,i.call=e,i.setApiUrl=n}(i=t.Api||(t.Api={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(t){function i(t){this.configList=t}function e(t){return this.configList.hasOwnProperty(t)?this.configList[t]:null}function n(t,i){this.configList[t]=i}t.configList={},t.load=i,t.get=e,t.set=n}(i=t.Config||(t.Config={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){function e(i,e){if("number"!=typeof i||0===i)return null;var n=new Date(0);n.setUTCSeconds(i);for(var o={d:function(){var t=o.j();return""+(10>t?"0"+t:t)},G:function(){return n.getHours()},H:function(){var t=o.G();return""+(10>t?"0"+t:t)},i:function(){var t=n.getMinutes();return""+(10>t?"0"+t:t)},j:function(){return n.getDate()},l:function(){return t.Locale.getText("calendar_day_"+n.getDay())},m:function(){var t=o.n();return""+(10>t?"0"+t:t)},n:function(){return n.getMonth()+1},Y:function(){return n.getFullYear()}},a="",s=0,r=e.length;r>s;++s){var l=e.substring(s,s+1);a+=o.hasOwnProperty(l)?o[l]():l}return a}function n(t){if("string"!=typeof t||0===t.length)return null;for(var i,e,n=[{pattern:/([\d]{1,2})\.([\d]{1,2})\.([\d]{4})[\s]{0,}([\d]{1,2})\:([\d]{1,2})/,matches:[3,2,1,4,5,null]},{pattern:/([\d]{1,2})\.([\d]{1,2})\.([\d]{4})/,matches:[3,2,1,null,null,null]},{pattern:/([\d]{4})\-([\d]{1,2})\-([\d]{1,2})[\s]{0,}([\d]{1,2})\:([\d]{1,2})/,matches:[1,2,3,4,5,null]},{pattern:/([\d]{4})\-([\d]{1,2})\-([\d]{1,2})/,matches:[1,2,3,null,null,null]}],o=0,a=n.length;a>o;++o)if(i=t.match(n[o].pattern),null!==i){e=n[o].matches;var s=new Date;return s.setFullYear(parseInt(i[e[0]])),s.setMonth(parseInt(i[e[1]])-1),s.setDate(parseInt(i[e[2]])),s.setHours(null!==e[3]?parseInt(i[e[3]]):0),s.setMinutes(null!==e[4]?parseInt(i[e[4]]):0),s.setSeconds(null!==e[5]?parseInt(i[e[5]]):0),Math.round((s.getTime()+s.getTimezoneOffset())/1e3)}return null}i.toDate=e,i.toTime=n}(i=t.Format||(t.Format={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){function e(t){return this.calendarList.hasOwnProperty(t)?this.calendarList[t]:t}function n(t,i){var e=this.textList.hasOwnProperty(t)?this.textList[t]:t;if("undefined"!=typeof i)for(var n in i)e=e.split("$"+n).join(i[n]);return e}function o(t){for(var i in t)this.calendarList[i]=t[i]}function a(t){for(var i in t)this.textList[i]=t[i]}function s(i,e){var n=this.getCalendar("format_"+e);return"string"!=typeof n?null:t.Format.toDate(i,n)}i.calendarList={},i.textList={},i.getCalendar=e,i.getText=n,i.loadCalendar=o,i.loadText=a,i.toDate=s}(i=t.Locale||(t.Locale={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){function e(t){this.htmlRoot.append(t)}function n(t){this.htmlRoot.addClass(t)}function o(){this.htmlRoot=$("body:first"),this.buildStyles(),this.addStyle("is-prepared")}function a(){this.htmlStyles=$("<style>").attr("type","text/css").appendTo(this.htmlRoot)}function s(t){this.htmlRoot.removeClass(t)}function r(i,e){if(this.loadedVendors.indexOf(i)>-1)return e(),!0;this.loadedVendors.push(i),require([i],function(){e()});var n=t.Config.get("VENDOR_STYLES");return n.hasOwnProperty(i)&&$("<link>").attr("type","text/css").attr("rel","stylesheet").attr("href",n[i]+".css").appendTo($("head:first")),!0}function l(t){this.htmlRoot.addClass("layout-"+t),"main"!==t&&this.htmlRoot.addClass("theme-background")}function h(t){this.htmlRoot.css("padding-left",t)}function p(t){var i=this;this.htmlRoot.addClass("is-"+t),"unloading"===t&&window.setTimeout(function(){i.htmlRoot.removeClass("is-unloading")},3e3)}function d(t){var i=this.customStyles;for(var e in t)i=i.split("%"+e+"%").join(t[e]);this.htmlStyles.html(i)}function u(t){document.title=t.join(" - ")}i.loadedVendors=["app"],i.customStyles="\n		\n			a:hover {\n				color: %base%;\n			}\n		\n			input[type=text]:focus,\n			select:focus,\n			textarea:focus { \n				border-color: %base%;\n			}\n			\n			div.tinycar-ui-component-checkbox:not(old) label:hover > span.mark,\n			div.tinycar-ui-component-radiolist:not(old) label:hover > span.mark {\n				border-color: %base% !important; \n			}\n			\n			div.tinycar-ui-component-checkbox:not(old) input:checked + label > span.mark,\n			div.tinycar-ui-component-radiolist:not(old) input:checked + label > span.mark {\n				\n				border-color: %base% !important;\n				background-color: %base% !important;\n			\n			}\n			\n			.theme-background {\n				background-color: %base% !important;\n			}\n			\n			.theme-text {\n				color: %base%;\n			}\n			\n			.theme-text-liter {\n				color: %liter%;\n			}\n			\n			.theme-base {\n				background-color: %base%;\n			}\n			\n			.theme-border {\n				border-color: %base% !important;\n			}\n			\n			a.theme-base-lite {\n\n				border-color: %base% !important;\n				background-color: %base% !important;\n				color: #ffffff;\n			\n			}\n			\n			a.theme-base-lite:focus,\n			a.theme-base-lite:hover {\n				\n				border-color: %dark% !important;\n				background-color: %dark% !important;\n				color: #ffffff;\n				text-decoration: none;\n			\n			}\n			\n			a.theme-base-lite:active {\n				\n				border-color: %lite% !important;\n				background-color: %lite% !important;\n				color: #ffffff;\n			\n			}\n			\n			div.tinycar-ui-component-datagrid.is-selectable a.is-selected span.check {\n				\n				border-color: %base% !important;\n				background-color: %base% !important;\n			\n			}\n			\n			div.tinycar-ui-component-datagrid.is-selectable a:hover span.check,\n			div.tinycar-ui-component-datagrid.is-selectable a:focus span.check {\n				border-color: %base% !important;\n			}\n			\n			div.ui-datepicker td:hover > a {\n\n				border-color: %base% !important;\n				background-color: #ffffff !important;\n			\n			}\n			\n			div.ui-datepicker td:active > a {\n				border-color: transparent !important;\n			}\n\n			div.ui-datepicker td.ui-datepicker-current-day > a {\n				\n				background-color: %base% !important;\n				color: #ffffff !important;\n			\n			}\n			\n		",i.addNode=e,i.addStyle=n,i.build=o,i.buildStyles=a,i.clearStyle=s,i.loadVendor=r,i.setLayoutName=l,i.setSideBarWidth=h,i.setState=p,i.setThemeColors=d,i.setTitle=u}(i=t.Page||(t.Page={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(t){function i(t){sessionStorage.removeItem(t)}function e(t){var i=sessionStorage.getItem(t);return"string"!=typeof i?{}:(i=JSON.parse(i),i instanceof Object?i:{})}function n(t){return null!==sessionStorage.getItem(t)}function o(t,i){sessionStorage.setItem(t,JSON.stringify(i))}t.clear=i,t.get=e,t.has=n,t.set=o}(i=t.Session||(t.Session={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){function e(i){var e={app:this.getParam("app"),view:this.getParam("view")};i.hasOwnProperty("app")&&(e.app=i.app),i.hasOwnProperty("view")&&(e.view=i.view),i.hasOwnProperty("id")&&(e.id=i.id),"default"===e.view&&delete e.view;var n=[];for(var o in e)n.push(o+":"+e[o]);return"?"+t.Config.get("PATH_PARAM")+"=/"+n.join("/")+"/"}function n(t){return this.paramList.hasOwnProperty(t)?this.paramList[t]:null}function o(){return this.paramList}function a(t){var i=this,e="uid",n=["app","view","id"];return"string"==typeof t&&"app"===t&&(n=["app"]),n.forEach(function(t){i.paramList.hasOwnProperty(t)&&(e+="-"+i.paramList[t])}),e}function s(t,i){var e=jQuery.extend(!0,{},t);for(var n in i)for(var o in i[n])for(var a in t)e[a]==="$"+n+"."+o&&(e[a]=i[n][o]);return e}function r(t){return this.paramList.hasOwnProperty(t)}function l(t,i){void 0===i&&(i=!1);for(var e in t)if((i!==!0||"view"!==e||"default"!==t[e])&&this.getParam(e)!==t[e])return!1;return!0}function h(i){for(var e in i)this.paramList[e]=i[e];this.paramList.hasOwnProperty("app")||(this.paramList.app=t.Config.get("APP_HOME")),this.paramList.hasOwnProperty("view")||(this.paramList.view="default")}function p(i){t.Page.setState("unloading"),location.href=i}function d(t,i){this.paramList[t]=i}function u(t,i){"object"==typeof i&&(t=this.getWithVars(t,i)),this.updateUrl(this.getAsPath(t))}function c(i){t.Page.setState("unloading"),location.replace(i)}i.paramList={},i.getAsPath=e,i.getParam=n,i.getParams=o,i.getUid=a,i.getWithVars=s,i.hasParam=r,i.isPathMatch=l,i.load=h,i.openUrl=p,i.setParam=d,i.updatePath=u,i.updateUrl=c}(i=t.Url||(t.Url={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(t){function i(t){return this.dataList.hasOwnProperty(t)?this.dataList[t]:null}function e(){return this.get("is_empty")===!1}function n(t){this.dataList=t}t.dataList={},t.get=i,t.hasAuthenticated=e,t.load=n}(i=t.User||(t.User={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(t){var i=function(){function t(t){this.dataList=[],this.dataList=t}return t.prototype.addAll=function(t){for(var i in t)this.dataList[i]=t[i]},t.prototype.clear=function(t){this.dataList.hasOwnProperty(t)&&delete this.dataList[t]},t.prototype.get=function(t){return this.dataList.hasOwnProperty(t)?this.dataList[t]:null},t.prototype.getAll=function(){return this.dataList},t.prototype.getIndex=function(t,i){return this.isArray(t)?this.dataList[t].length<i?null:this.dataList[t][i]:null},t.prototype.getNumber=function(t){return this.isNumber(t)?this.dataList[t]:0},t.prototype.getList=function(t){return this.isArray(t)?this.dataList[t]:[]},t.prototype.getString=function(t){var i=this.get(t);return"string"==typeof i?i:""},t.prototype.getObject=function(t){return this.isObject(t)?this.dataList[t]:{}},t.prototype.has=function(t){return this.dataList.hasOwnProperty(t)},t.prototype.load=function(t){this.dataList=t},t.prototype.hasNumber=function(t){return this.isNumber(t)&&this.dataList[t]>0},t.prototype.hasString=function(t){return this.isString(t)&&this.dataList[t].length>0},t.prototype.isArray=function(t){return this.dataList.hasOwnProperty(t)&&this.dataList[t]instanceof Array},t.prototype.isNumber=function(t){return this.dataList.hasOwnProperty(t)&&"number"==typeof this.dataList[t]},t.prototype.isObject=function(t){return this.dataList.hasOwnProperty(t)&&this.dataList[t]instanceof Object&&!(this.dataList[t]instanceof Array)},t.prototype.isString=function(t){return this.dataList.hasOwnProperty(t)&&"string"==typeof this.dataList[t]},t.prototype.set=function(t,i){this.dataList[t]=i},t}();t.DataItem=i}(i=t.Model||(t.Model={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(t){var i=function(){function t(t,i,e){this.handlerList={},this.isCmpVisible=!1,this.App=t,this.View=i,this.Model=e}return t.prototype.action=function(t,i,e){this.View.onComponent(this.Model.get("id"),t,i,e)},t.prototype.build=function(){return this.buildRoot(),this.buildContent(),this.htmlRoot},t.prototype.buildContent=function(){},t.prototype.buildRoot=function(){var t=this.Model.get("type_name").toLowerCase();this.htmlRoot=$("<div>").addClass(this.getRootStyles().join(" ")).addClass("tinycar-ui-component-"+t)},t.prototype.callHandler=function(t,i){this.handlerList.hasOwnProperty(t)&&this.handlerList[t](i)},t.prototype.getId=function(){return this.Model.get("id")},t.prototype.getRootStyles=function(){return["tinycar-main-component"]},t.prototype.getTabName=function(){return this.Model.get("tab_name")},t.prototype.isVisible=function(){return this.isCmpVisible},t.prototype.refresh=function(){},t.prototype.setAsVisible=function(t){t===!0?(this.isCmpVisible=!0,this.htmlRoot.addClass("is-visible")):(this.isCmpVisible=!1,this.htmlRoot.removeClass("is-visible"))},t.prototype.setHandler=function(t,i){this.handlerList[t]=i},t.prototype.start=function(){},t}();t.Component=i}(i=t.Main||(t.Main={}))}(Tinycar||(Tinycar={}));var __extends=this&&this.__extends||function(t,i){function e(){this.constructor=t}for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)},Tinycar;!function(t){var i;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.build=function(){return this.buildRoot(),this.Model.hasString("type_label")?this.buildTypeLabel():this.buildEmptyLabel(),this.buildContent(),this.Model.hasString("type_instructions")&&this.buildTypeInstructions(),this.htmlRoot},e.prototype.buildContent=function(){this.htmlContent=$("<div>").attr("class","type-content").appendTo(this.htmlRoot)},e.prototype.buildEmptyLabel=function(){$("<div>").attr("class","type-label-empty").appendTo(this.htmlRoot)},e.prototype.buildTypeInstructions=function(){$("<div>").attr("class","type-instructions").text(this.Model.get("type_instructions")).appendTo(this.htmlContent)},e.prototype.buildTypeLabel=function(){var i=$("<div>").attr("class","type-label").appendTo(this.htmlRoot),e=$("<label>").attr("class","label").attr("for",this.getFieldId()).text(this.Model.get("type_label")).appendTo(i);if(this.Model.get("data_required")===!0&&(e.attr("title",t.Locale.getText("info_required_field")),$("<span>").attr("class","required theme-base").appendTo(e)),this.Model.hasString("type_help")){var n=new t.Ui.Main.Help(this.Model.get("type_help"));i.append(n.build())}},e.prototype.focus=function(){},e.prototype.getRootStyles=function(){var t=i.prototype.getRootStyles.call(this);return t.push("tinycar-main-field"),this.isTypeEnabled()===!0&&t.push("is-enabled"),t},e.prototype.getDataName=function(){return this.Model.get("data_name")},e.prototype.getDataValue=function(){return this.Model.get("data_value")},e.prototype.getFieldId=function(t){return void 0===t&&(t=""),"field-"+this.Model.get("id")+"-"+t},e.prototype.isTypeEnabled=function(){return this.Model.get("type_enabled")!==!1},e.prototype.setDataValue=function(t){this.Model.set("data_value",t)},e}(t.Main.Component);i.Field=e}(i=t.Main||(t.Main={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(){function i(){}return i.prototype.buildRoot=function(){this.htmlRoot=$("<div>").attr("id","tinycar-main-mask"),t.Page.addNode(this.htmlRoot)},i.prototype.hide=function(){this.htmlRoot.addClass("is-hidden")},i.prototype.showAsMask=function(){this.htmlRoot instanceof Object||this.buildRoot(),this.htmlRoot.removeClass("is-hidden").addClass("is-visible").css("cursor","default")},i.prototype.showAsSkin=function(t){this.htmlRoot instanceof Object||this.buildRoot(),this.htmlRoot.removeClass("is-hidden").addClass("is-skin").addClass("is-visible").css("cursor",t)},i}();i.Mask=e}(i=t.Main||(t.Main={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(){function i(){this.isMouseOver=!1}return i.prototype.build=function(){return this.buildRoot(),this.buildMessage(),this.buildClose(),t.Session.has("toast-message")&&this.loadSession(),this.htmlRoot},i.prototype.buildMessage=function(){this.htmlMessage=$("<div>").attr("class","message").appendTo(this.htmlRoot)},i.prototype.buildClose=function(){var t=this,i=$("<a>").attr("class","close").appendTo(this.htmlRoot);$("<span>").attr("class","icon icon-small icon-close").appendTo(i),i.click(function(i){i.preventDefault(),t.hide()})},i.prototype.buildRoot=function(){var t=this;this.htmlRoot=$("<div>").attr("id","tinycar-main-toast"),this.htmlRoot.mouseenter(function(){t.isMouseOver=!0}),this.htmlRoot.mouseleave(function(){t.isMouseOver=!1})},i.prototype.hide=function(){null!==this.hideTimer&&(window.clearInterval(this.hideTimer),this.hideTimer=null),this.htmlRoot.addClass("is-hidden")},i.prototype.loadSession=function(){var i=t.Session.get("toast-message");this.setMessage({type:i.type,text:i.text,delay:i.delay}),this.show(),t.Session.clear("toast-message")},i.prototype.setMessage=function(t){this.nextMessage=t},i.prototype.show=function(){var t=this;if(null===this.nextMessage)return!1;var i=this.nextMessage;return this.nextMessage=null,this.hideTimer&&(window.clearInterval(this.hideTimer),this.hideTimer=null),null!==this.showTimer&&(window.clearTimeout(this.showTimer),this.showTimer=null),i.hasOwnProperty("delay")?this.showTimer=window.setTimeout(function(){t.showMessage(i)},1e3*i.delay):this.showMessage(i),!0},i.prototype.showMessage=function(t){var i=this;if(t.hasOwnProperty("vars"))for(var e in t.vars)t.text=t.text.split("$"+e).join(t.vars[e]);this.htmlMessage.text(t.text),this.htmlRoot.attr("class","type-"+t.type+" is-visible"),"success"===t.type&&(this.hideTimer=window.setInterval(function(){i.isMouseOver===!1&&i.hide()},3e3))},i.prototype.store=function(){null!==this.nextMessage&&(this.nextMessage.delay=.5,t.Session.set("toast-message",this.nextMessage))},i}();i.Toast=e}(i=t.Main||(t.Main={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(){function i(i,e){this.componentList=[],this.fieldList=[],this.App=i,this.Model=new t.Model.DataItem(e)}return i.prototype.addComponent=function(i){this.componentList.push(i),i instanceof t.Main.Field&&this.fieldList.push(i)},i.prototype.createComponent=function(i){var e=new t.Model.DataItem(i),n=e.get("type_name"),o=new t.Ui.Component[n](this.App,this,e);return o},i.prototype.getComponentsData=function(){var t={};return this.Model.get("components").forEach(function(i){i.hasOwnProperty("data_value")&&(t[i.id]=i.data_value)}),this.fieldList.forEach(function(i){t[i.getId()]=i.getDataValue()}),t},i.prototype.getDialogName=function(){return null},i.prototype.getName=function(){return this.Model.get("name")},i.prototype.getViewName=function(){return null},i.prototype.refreshComponents=function(){this.componentList.forEach(function(t){t.isVisible()&&t.refresh()})},i.prototype.onComponent=function(t,i,e,n){},i.prototype.onResponse=function(i){i.hasString("toast")&&t.System.Toast.setMessage({type:"success",text:i.get("toast"),vars:{value:i.get("value")}}),i.isObject("link")&&i.hasString("toast")?(t.System.Toast.store(),t.Url.updatePath(i.getObject("link"),{url:t.Url.getParams(),model:{id:i.get("value")}})):i.isObject("link")?t.Url.updatePath(i.getObject("link"),{url:t.Url.getParams(),model:{id:i.get("value")}}):i.hasString("toast")&&t.System.Toast.show()},i}();i.View=e}(i=t.Main||(t.Main={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(){function i(i){this.appName=i,this.Model=new t.Model.DataItem({})}return i.prototype.build=function(){return this.buildRoot(),this.htmlRoot},i.prototype.closeDialog=function(){t.System.Mask.hide(),this.Dialog=null,this.View.refreshComponents()},i.prototype.getId=function(){return this.Model.get("id")},i.prototype.getThemeColor=function(t){var i=this.Model.getObject("colors");return i.hasOwnProperty(t)?i[t]:"#000000"},i.prototype.loadView=function(i){var e=this;t.Api.call({service:"application.view",params:{app:this.appName,view:i,url:t.Url.getParams()},success:function(i){e.Model=new t.Model.DataItem(i.app),t.Locale.loadText(i.text),e.View=new t.Ui.View(e,i.view),"main"===e.Model.get("layout_name")&&(e.Bar=new t.Main.SideBar(e.View,i.bar),t.Page.addNode(e.Bar.build())),i.hasOwnProperty("side")&&(e.List=new t.Ui.SideList(e,i.side),e.htmlRoot.append(e.List.build()),t.Page.addStyle("has-sidelist")),e.htmlRoot.append(e.View.build()),t.Page.setLayoutName(e.Model.get("layout_name")),t.Page.setThemeColors(e.Model.get("colors")),window.setTimeout(function(){t.Page.setState("rendered"),t.Url.hasParam("id")||e.View.focus()},100)}})},i.prototype.buildRoot=function(){this.htmlRoot=$("<div>").attr("class","tinycar-ui-application")},i.prototype.openDialog=function(i){t.System.Mask.showAsMask();var e=this.getId();return i.indexOf(":")>-1&&(e=i.split(":").shift(),i=i.split(":").pop()),this.Dialog=new t.Ui.Dialog(this,{app:e,name:i}),this.htmlRoot.append(this.Dialog.build()),this.Dialog.load(this.View.getComponentsData()),this.Dialog},i.prototype.toggleSideList=function(){this.List instanceof t.Ui.SideList&&this.List.setAsVisible(!this.List.isVisible())},i}();i.Application=e}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(){function i(i){this.handlerList={},this.isEnabled=!0,this.Model=new t.Model.DataItem(i)}return i.prototype.build=function(){return this.buildRoot(),this.Model.hasString("icon")&&this.buildIcon(),this.Model.hasString("label")&&this.buildLabel(),this.htmlRoot},i.prototype.callHandler=function(t){this.handlerList.hasOwnProperty(t)&&this.handlerList[t]()},i.prototype.buildIcon=function(){var t=$("<span>").attr("class","icon icon-"+this.Model.get("icon")).appendTo(this.htmlRoot);t.addClass(this.Model.has("size")?"icon-"+this.Model.get("size"):"icon-small"),"theme-icon"===this.Model.get("style")&&t.addClass("icon-lite")},i.prototype.buildLabel=function(){this.htmlRoot.text(this.Model.get("label")),this.htmlRoot.addClass(this.Model.has("size")?"button-"+this.Model.get("size"):"button-default")},i.prototype.buildRoot=function(){var i=this,e=null;this.htmlRoot=$("<a>").addClass("tinycar-ui-button").addClass(this.Model.get("style")),"theme-icon"===this.Model.get("style")?this.htmlRoot.addClass("theme-base-lite"):"theme-button"===this.Model.get("style")&&this.htmlRoot.addClass("theme-base-lite"),this.Model.isObject("link")&&(e=t.Url.getAsPath(this.Model.get("link")),this.htmlRoot.attr("href",e)),this.htmlRoot.click(function(n){n.preventDefault(),window.setTimeout(function(){i.isEnabled===!0&&("string"==typeof e?t.Url.openUrl(e):i.callHandler("click"))},100)})},i.prototype.setAsEnabled=function(t){t===!0?(this.isEnabled=!0,this.htmlRoot.removeClass("is-disabled")):(this.isEnabled=!1,this.htmlRoot.addClass("is-disabled"))},i.prototype.setHandler=function(t,i){this.handlerList[t]=i},i}();i.Button=e}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(i){function e(){i.apply(this,arguments),this.componentData={},this.contentPadding=0,this.handlerList={}}return __extends(e,i),e.prototype.addDataForComponentType=function(t,i){this.componentData[t]=i},e.prototype.build=function(){return this.buildRoot(),this.htmlRoot},e.prototype.buildActions=function(){var i=this,e=$("<div>").attr("class","actions").appendTo(this.htmlContent);this.Model.get("actions").forEach(function(n,o){var a=new t.Ui.Button({style:0===o?"theme-button":"secondary-button",label:n.label});a.setHandler("click",function(){"cancel"===n.type?i.close():"select"===n.type?i.onSelect():i.onAction(n)}),e.append(a.build())})},e.prototype.buildClose=function(){var t=this,i=$("<a>").attr("class","close theme-base-lite").appendTo(this.htmlRoot);$("<span>").attr("class","icon icon-lite icon-medium icon-close").appendTo(i),i.click(function(i){i.preventDefault(),window.setTimeout(function(){t.close()},300)})},e.prototype.buildComponents=function(){var i=this;this.htmlComponents=$("<div>").attr("class","components").appendTo(this.htmlContent),this.Model.get("components").forEach(function(e){var n=new t.Model.DataItem(e),o=n.get("type_name");i.componentData.hasOwnProperty(o)&&n.addAll(i.componentData[o]);var a=new t.Ui.Component[o](i.App,i,n);i.htmlComponents.append(a.build()),i.addComponent(a)})},e.prototype.buildContent=function(){this.htmlContent=$("<div>").attr("class","content").appendTo(this.htmlRoot)},e.prototype.buildHeading=function(){this.htmlHeading=$("<div>").attr("class","heading").text(this.Model.get("heading")).appendTo(this.htmlContent)},e.prototype.buildRoot=function(){this.htmlRoot=$("<div>").attr("id","tinycar-ui-dialog")},e.prototype.close=function(){this.App.closeDialog(),t.System.clearEvent("resize",this.resizeEvent),this.htmlRoot.remove()},e.prototype.load=function(i){var e=this;t.Api.call({service:"dialog.view",params:{app:this.Model.get("app"),dialog:this.Model.get("name"),url:t.Url.getParams(),data:i},success:function(i){e.Model.addAll(i),e.buildClose(),e.buildContent(),e.buildHeading(),e.buildComponents(),e.buildActions(),e.resizeEvent=t.System.addEvent("resize",function(){e.updateDimensions()}),window.setTimeout(function(){e.show()},100)}})},e.prototype.onAction=function(i){var e=this,n=new t.Model.DataItem(i);t.Api.call({service:"dialog.action",params:{url:t.Url.getParams(),app:this.Model.get("app"),dialog:this.Model.get("name"),action:n.get("type"),data:this.getComponentsData()},success:function(t){n.set("value",t),e.onResponse(n),e.close()}})},e.prototype.onComponent=function(i,e,n,o){t.Api.call({service:"dialog.component",params:{app:this.Model.get("app"),dialog:this.Model.get("name"),component:i,action:e,data:n},success:o})},e.prototype.onSelect=function(){var t=[];this.componentList.forEach(function(i){"getSelectedItems"in i&&(t=t.concat(i.getSelectedItems()))}),this.handlerList.hasOwnProperty("select")&&this.handlerList.select(t),this.close()},e.prototype.setHandler=function(t,i){this.handlerList[t]=i},e.prototype.show=function(){this.contentPadding=parseInt(this.htmlContent.css("padding-top"))+parseInt(this.htmlContent.css("padding-bottom"))+10,this.htmlRoot.addClass("is-visible"),this.updateDimensions()},e.prototype.updateDimensions=function(){var t=$(window).height(),i=Math.min(t,Math.max(this.htmlComponents.outerHeight()+this.contentPadding,this.htmlComponents.get(0).scrollTop+this.htmlComponents.get(0).scrollHeight+this.contentPadding)),e=Math.max(0,Math.round((t-i)/2));this.htmlRoot.css({top:e,height:i})},e}(t.Main.View);i.Dialog=e}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(){function i(i,e){this.View=i,this.Model=new t.Model.DataItem(e)}return i.prototype.build=function(){return this.buildRoot(),this.buildComponents(),this.buildResizeGap(),this.htmlRoot},i.prototype.buildComponents=function(){var t=this,i=$("<div>").attr("class","components").appendTo(this.htmlRoot);this.Model.get("components").forEach(function(e){var n=t.View.createComponent(e);i.append(n.build()),n.setAsVisible(!0)})},i.prototype.buildResizeGap=function(){var i=new t.Ui.Main.ResizeGap("sidebar8",this.htmlRoot);i.setDefaultWidth(this.Model.getNumber("default_width")),i.setMinWidth(64),i.setMaxWidth(250),i.setMinCollapse(100),i.setHandler("resized",function(i){t.Page.setSideBarWidth(i)}),this.htmlRoot.append(i.build())},i.prototype.buildRoot=function(){this.htmlRoot=$("<div>").attr("id","tinycar-main-sidebar").attr("class","theme-base")},i}();i.SideBar=e}(i=t.Main||(t.Main={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(){function i(i,e){this.settingsData={visible:!0},this.App=i,this.Model=new t.Model.DataItem(e)}return i.prototype.build=function(){return this.buildRoot(),this.buildHeading(),this.buildComponents(),this.loadSettings(),this.isVisible()&&t.Page.addStyle("sidelist-visible"),this.htmlRoot},i.prototype.buildComponents=function(){var t=this;this.htmlComponents=$("<div>").attr("class","components").appendTo(this.htmlRoot),this.Model.get("components").forEach(function(i){var e=t.App.View.createComponent(i);t.htmlComponents.append(e.build()),e.setAsVisible(!0)})},i.prototype.buildHeading=function(){var i=new t.View.Heading(this.Model);i.setBackLink({app:t.Config.get("APP_HOME"),view:"default"}),this.htmlRoot.append(i.build())},i.prototype.buildRoot=function(){this.htmlRoot=$("<div>").addClass("tinycar-ui-sidelist")},i.prototype.isVisible=function(){return this.settingsData.visible},i.prototype.loadSettings=function(){this.settingsId="sidelist-"+t.Url.getUid("app");var i=t.Session.get(this.settingsId);i.hasOwnProperty("visible")&&(this.settingsData.visible=i.visible===!0)},i.prototype.setAsVisible=function(i){i?t.Page.addStyle("sidelist-visible"):t.Page.clearStyle("sidelist-visible"),this.settingsData.visible=i,this.storeSettings()},i.prototype.storeSettings=function(){t.Session.set(this.settingsId,this.settingsData)},i}();i.SideList=e}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(i){function e(){i.apply(this,arguments),this.tabFields={}}return __extends(e,i),e.prototype.build=function(){return this.buildRoot(),this.buildHeading(),this.buildTabs(),this.buildComponents(),"main"!==this.App.Model.get("layout_name")&&this.buildActions(),this.updatePageTitle(),this.showTab(this.Tabs.getFirstTab()),this.htmlRoot},e.prototype.buildAction=function(i){var e=this,n=new t.Ui.Button({style:"theme-button",label:i.get("label")});return n.setHandler("click",function(){e.callAction(i)}),"submit"===i.get("type")&&t.System.addEvent("submit",function(){n.callHandler("click")}),n.build()},e.prototype.buildActions=function(){var i=this,e=$("<div>").attr("class","actions").appendTo(this.htmlRoot);this.Model.get("actions").forEach(function(n){e.append(i.buildAction(new t.Model.DataItem(n)))})},e.prototype.buildComponents=function(){this.htmlComponents=$("<div>").attr("class","components").appendTo(this.htmlRoot)},e.prototype.buildComponentsForTab=function(i){var e=this;this.tabFields[i]=[],this.Model.get("components").forEach(function(n){var o=new t.Model.DataItem(n);if(o.get("tab_name")===i){var a=o.get("type_name"),s=new t.Ui.Component[a](e.App,e,o);e.htmlComponents.append(s.build()),e.addComponent(s),s instanceof t.Main.Field&&e.tabFields[i].push(e.fieldList.length-1)}})},e.prototype.buildHeading=function(){var i=new t.View.Heading(this.Model);this.hasSideList()||i.setBackLink(this.getPreviousPath()),this.htmlRoot.append(i.build())},e.prototype.buildRoot=function(){this.htmlRoot=$("<form>").attr("method","POST").addClass("tinycar-ui-view").addClass("layout-"+this.Model.get("layout_type")),this.htmlRoot.submit(function(i){i.preventDefault(),t.System.callEvent("submit",i)}),$("<button>").attr("type","submit").attr("class","view-submit").appendTo(this.htmlRoot)},e.prototype.buildTabs=function(){var i=this,e=this.Model.get("tabs");this.Tabs=new t.View.Tabs(this),e.length>1&&(e.forEach(function(t){i.Tabs.addItem({name:t.name,label:t.label})}),this.htmlRoot.append(this.Tabs.build()))},e.prototype.callAction=function(i){var e=this;t.Api.call({service:"application.action",params:{url:t.Url.getParams(),app:this.App.getId(),view:this.getName(),action:i.get("type"),data:this.getComponentsData()},success:function(){e.onResponse(i)}})},e.prototype.focus=function(){var t=this.Tabs.getActiveTab();if(!this.tabFields.hasOwnProperty(t))return!1;if(0===this.tabFields[t].length)return!1;var i=this.tabFields[t][0];
return this.fieldList[i].focus(),!0},e.prototype.getPreviousPath=function(){var i=this.App.getId(),e=t.Config.get("APP_HOME"),n=t.Config.get("APP_LOGIN");return i===e||i===n?null:this.isDefaultView()?{app:e,view:"default"}:{app:i,view:"default"}},e.prototype.hasSideList=function(){return this.Model.get("has_sidelist")===!0},e.prototype.isDefaultView=function(){return"default"===this.getName()},e.prototype.onComponent=function(i,e,n,o){t.Api.call({service:"application.component",params:{url:t.Url.getParams(),app:this.App.Model.get("id"),view:this.getName(),component:i,action:e,data:n},success:o})},e.prototype.onSave=function(i){var e=this;t.Api.call({service:"application.save",params:{app:this.App.getId(),view:this.getName(),url:t.Url.getParams(),data:this.getComponentsData()},success:function(t){"number"==typeof t?(i.set("value",t),e.onResponse(i)):(i.clear("link"),e.onResponse(i))}})},e.prototype.openDialog=function(t){this.App.openDialog(t)},e.prototype.showTab=function(t){this.Tabs.setActiveTab(t),this.tabFields.hasOwnProperty(t)?this.componentList.forEach(function(i){i.setAsVisible(i.getTabName()===t)}):(this.buildComponentsForTab(t),this.componentList.forEach(function(i){i.setAsVisible(i.getTabName()===t),i.isVisible()&&i.start()}))},e.prototype.updatePageTitle=function(){var i=[];this.isDefaultView()||i.push(this.Model.get("heading")),i.push(this.App.Model.get("name")),i.push(t.Config.get("SYSTEM_TITLE")),t.Page.setTitle(i)},e}(t.Main.View);i.View=e}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.Model.hasString("title")&&this.buildTitle(),this.buildList()},e.prototype.buildList=function(){var t=this;this.Model.getList("options").forEach(function(i){t.htmlRoot.append(t.buildListItem(i))})},e.prototype.buildListItem=function(i){var e=this,n=new t.Model.DataItem(i),o=this.buildListItemContainer(n);return o.append(this.buildListItemIcon(n)),o.append(this.buildListItemLabel(n)),o.click(function(i){e.triggerListItemAction(n)?i.preventDefault():n.isObject("link")&&i.ctrlKey===!1&&i.shiftKey===!1&&(i.preventDefault(),t.Url.openUrl(o.attr("href")),o.blur())}),"save"===n.get("type")&&t.System.addEvent("ctrl+s",function(){o.trigger("click")}),o},e.prototype.buildListItemContainer=function(i){var e=$("<a>").attr("class","item");if(this.isListItemLink(i)){var n=t.Url.getWithVars(i.get("link"),{url:t.Url.getParams()});e.attr("href",t.Url.getAsPath(n)),t.Url.isPathMatch(n,!0)&&e.addClass("is-active")}return e},e.prototype.buildListItemIcon=function(t){var i=$("<span>").attr("class","icon icon-small icon-lite icon-"+t.get("icon"));return i},e.prototype.buildListItemLabel=function(t){var i=t.get("label");t.hasString("dialog")&&(i+="...");var e=$("<span>").attr("class","label").text(i);return $("<span>").attr("class","icon icon-small icon-"+t.get("icon")).appendTo(e),e},e.prototype.buildTitle=function(){$("<div>").attr("class","title theme-text-liter").text(this.Model.get("title")).appendTo(this.htmlRoot),this.htmlRoot.addClass("with-title")},e.prototype.isListItemLink=function(t){return!t.hasString("service")&&t.isObject("link")},e.prototype.setAsVisible=function(t){this.Model.getList("options").length>0&&i.prototype.setAsVisible.call(this,t)},e.prototype.triggerListItemAction=function(i){return i.hasString("dialog")?(this.App.openDialog(i.get("dialog")),!0):"save"===i.get("type")?(this.View.onSave(new t.Model.DataItem({link:i.get("link"),toast:i.get("toast")})),!0):"list"===i.get("type")?(this.View.App.toggleSideList(),!0):i.hasString("service")?(this.View.callAction(i),!0):!1},e}(t.Main.Component);i.ActionList=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildButton=function(){var i=this,e=new t.Ui.Button(this.getButtonProperties());e.setHandler("click",function(){i.execute()}),this.htmlContent.append(e.build())},e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.buildButton()},e.prototype.execute=function(){var i=this;this.Model.hasString("button_dialog")?this.App.openDialog(this.Model.get("button_dialog")):this.action("click",this.View.getComponentsData(),function(e){i.View.onResponse(new t.Model.DataItem({value:e,toast:i.Model.get("button_toast")})),i.View.refreshComponents()})},e.prototype.getButtonProperties=function(){var t={};return this.Model.hasString("button_icon")?t={style:"theme-icon",size:"tiny",icon:this.Model.get("button_icon")}:this.Model.hasString("button_label")&&(t={style:"theme-button",size:"small",label:this.Model.get("button_label")},this.Model.hasString("button_dialog")&&(t.label+="...")),t},e}(t.Main.Field);i.Button=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.buildField(),this.buildInput(),this.buildLabel(),this.Model.hasString("type_help")&&this.buildHelp()},e.prototype.buildField=function(){this.htmlField=$("<div>").attr("class","field").appendTo(this.htmlContent)},e.prototype.buildHelp=function(){var i=new t.Ui.Main.Help(this.Model.get("type_help"));this.htmlField.append(i.build())},e.prototype.buildInput=function(){var t=this;this.fldInput=$("<input>").attr("id",this.getFieldId()).attr("type","checkbox").appendTo(this.htmlField),this.getDataValue()===!0&&this.fldInput.prop("checked",!0),this.fldInput.change(function(i){t.setDataValue(t.fldInput.prop("checked"))})},e.prototype.buildLabel=function(){var t=$("<label>").attr("for",this.getFieldId()).appendTo(this.htmlField),i=$("<span>").attr("class","mark").appendTo(t);$("<span>").attr("class","icon icon-lite icon-tiny icon-check").appendTo(i),$("<span>").attr("class","label").text(this.Model.get("label")).appendTo(t)},e.prototype.focus=function(){this.fldInput.focus()},e}(t.Main.Field);i.CheckBox=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments),this.visibleState=!1}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.buildField(),this.buildSample(),this.buildInput(),this.buildToggle(),this.initListeners()},e.prototype.buildField=function(){this.htmlField=$("<div>").attr("class","field").appendTo(this.htmlContent)},e.prototype.buildInput=function(){var i=t.Locale.getText("colorpicker_color");this.fldInput=$("<input>").attr("type","text").attr("placeholder",i+"...").prop("maxlength",7).prop("value",this.getDataValue()).appendTo(this.htmlField)},e.prototype.buildPalette=function(){var i=this;return this.htmlPalette=$("<div>").attr("class","tinycar-ui-component-colorpicker-palette").appendTo($("body:first")),this.Model.get("colors").forEach(function(t){i.htmlPalette.append(i.buildPaletteColor(t))}),this.htmlPalette.hide(),t.System.addEvent("resize",function(){i.visibleState===!0&&i.hidePalette()}),!0},e.prototype.buildPaletteColor=function(t){var i=this,e=$("<a>").attr("class","color").attr("data-color",t).css("background-color",t).appendTo(this.htmlPalette);return $("<span>").appendTo(e),e.click(function(e){e.preventDefault(),i.fldInput.val(t),i.updateSample(t)}),e},e.prototype.buildSample=function(){this.htmlSample=$("<span>").attr("class","sample").appendTo(this.htmlField),null!==this.getDataValue()&&this.htmlSample.css("background-color",this.getDataValue())},e.prototype.buildToggle=function(){var i=this,e=new t.Ui.Button({style:"field-icon",icon:"menu-horizontal"});e.setHandler("click",function(){i.visibleState===!0?i.hidePalette():i.showPalette()}),this.htmlField.append(e.build())},e.prototype.focus=function(){this.fldInput.focus()},e.prototype.hidePalette=function(){return this.visibleState=!1,this.htmlPalette.stop().fadeOut(100),!0},e.prototype.initListeners=function(){var t=this,i=null;this.fldInput.change(function(i){t.updateSample(t.fldInput.val())}),this.fldInput.keyup(function(e){i&&window.clearTimeout(i),i=window.setTimeout(function(){i=null,t.fldInput.trigger("change")},300)}),this.fldInput.blur(function(i){var e=t.fldInput.val();6===e.length&&-1===e.indexOf("#")&&t.fldInput.val("#"+e)})},e.prototype.showPalette=function(){var t=this;if(this.visibleState===!0)return!1;this.hasOwnProperty("htmlPalette")||this.buildPalette(),this.visibleState=!0,this.htmlPalette.children("a.is-selected:first").removeClass("is-selected"),null!==this.getDataValue()&&this.htmlPalette.children('a[data-color="'+this.getDataValue()+'"]:first').addClass("is-selected");var i=this.fldInput.offset();return this.htmlPalette.css({left:i.left,top:i.top+40}),this.htmlPalette.stop().fadeIn(100),window.setTimeout(function(){$(window).one("click",function(){t.hidePalette()})},10),!0},e.prototype.updateSample=function(t){t="#"+jQuery.trim(t.toLowerCase().split("#").join("")),7===t.length?(this.setDataValue(t),this.htmlSample.css("background-color",t)):(this.setDataValue(null),this.htmlSample.css("background-color","transparent"))},e}(t.Main.Field);i.ColorPicker=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.Model.hasString("heading")&&this.buildHeading(),this.buildList(),this.buildInput(),this.buildButton(),this.loadList()},e.prototype.buildButton=function(){var i=this,e=new t.Ui.Button({style:"theme-button",size:"small",label:this.Model.getString("insert_button")});e.setHandler("click",function(){i.action("insert",{message:i.Input.getDataValue()},function(){i.View.onResponse(new t.Model.DataItem({toast:i.Model.get("insert_toast")})),i.Input.setDataValue(null),i.refresh()})}),this.htmlRoot.append(e.build()),this.Button=e},e.prototype.buildHeading=function(){var t=$("<div>").attr("class","heading").text(this.Model.get("heading")).appendTo(this.htmlRoot);this.htmlAmount=$("<span>").attr("class","amount").text("0").appendTo(t)},e.prototype.buildInput=function(){var i=this,e=new t.Model.DataItem({type_name:"TextInput",type_label:this.Model.getString("insert_label"),placeholder:this.Model.getString("insert_placeholder"),rows:5}),n=new t.Ui.Component.TextInput(this.App,this.View,e);n.setHandler("value",function(t){i.Button.setAsEnabled(t)}),this.htmlRoot.append(n.build()),n.setAsVisible(!0),this.Input=n},e.prototype.buildLine=function(){$("<span>").attr("class","line").appendTo(this.htmlList)},e.prototype.buildList=function(){this.htmlList=$("<div>").attr("class","list").appendTo(this.htmlRoot)},e.prototype.buildListItem=function(t){return"message"===t.type?this.buildListItemAsMessage(t):this.buildListItemAsEvent(t)},e.prototype.buildListItemAsEvent=function(i){var e=$("<div>").attr("class","item item-event"),n=$("<span>").attr("class","symbol").appendTo(e);$("<span>").attr("class","icon icon-tiny icon-"+i.icon).prependTo(n);var o=""+i.message+" "+t.Locale.toDate(i.created,"datetime");$("<div>").attr("class","line").text(o).appendTo(e);return e},e.prototype.buildListItemAsMessage=function(i){var e=$("<div>").attr("class","item item-message"),n=$("<span>").attr("class","symbol").appendTo(e);$("<span>").attr("class","icon icon-tiny icon-"+i.icon).prependTo(n);var o=t.Locale.getText("commentslist_wrote_at",{time:t.Locale.toDate(i.created,"datetime")}),a=$("<div>").attr("class","line").appendTo(e);return $("<span>").attr("class","author").text(i.author+" ").appendTo(a),$("<span>").attr("class","wrote").text(o).appendTo(a),$("<div>").attr("class","message").html(i.message).appendTo(e),e},e.prototype.loadList=function(){var t=this;this.action("data",{},function(i){t.htmlList.empty(),t.htmlAmount.text("("+i.length+")"),t.buildLine(),i.forEach(function(i){t.htmlList.append(t.buildListItem(i))})})},e.prototype.refresh=function(){this.loadList()},e.prototype.start=function(){i.prototype.start.call(this),this.Input.start()},e}(t.Main.Component);i.CommentsList=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments),this.dataList=[],this.htmlListColumns=[],this.htmlListItems={},this.isSearchVisible=!1,this.isSelectable=!1,this.lastQuery="",this.selectedItems=[],this.selectedLimit=0,this.viewList=[],this.settingsData={order:0,sort:"asc",query:""}}return __extends(e,i),e.prototype.buildMenuAction=function(){var t=this,i=$("<a>").attr("class","search").appendTo(this.htmlListTable);$("<span>").attr("class","icon icon-small icon-menu-vertical").appendTo(i),i.click(function(i){i.preventDefault(),window.setTimeout(function(i){t.showSearch(!t.isSearchVisible,!0)},200)})},e.prototype.buildContent=function(){this.buildListTable(),this.buildMenuAction(),this.buildListColumns(),this.buildListData(),this.htmlRoot.addClass("search-hidden"),this.Model.isObject("link")?this.linkPattern=t.Url.getAsPath(this.Model.get("link")):(this.isSelectable=!0,this.htmlRoot.addClass("is-selectable"),this.selectedLimit=this.Model.getNumber("data_limit"),this.selectedItems=this.Model.getList("data_value")),this.loadSettings(),this.setColumnOrder(this.settingsData.order),this.settingsData.query.length>0&&this.showSearch(!0,!1),this.loadList()},e.prototype.buildListColumn=function(t,i){var e=this,n=$("<div>").attr("class","column"),o=$("<a>").text(i.label).appendTo(n);return o.click(function(i){i.preventDefault(),e.setColumnSort(t),e.setColumnOrder(t),e.storeSettings(),e.updateListOrder(),e.buildListItems()}),$("<span>").attr("class","icon icon-small icon-sort-down").appendTo(o),$("<span>").attr("class","icon icon-small icon-sort-up").appendTo(o),i.width>0&&n.css("width",i.width),this.htmlListColumns.push(n),n},e.prototype.buildListColumns=function(){var t=this,i=$("<div>").attr("class","columns").appendTo(this.htmlListTable);this.Model.get("columns").forEach(function(e,n){i.append(t.buildListColumn(n,e))})},e.prototype.buildListData=function(){this.htmlListData=$("<div>").attr("class","list").appendTo(this.htmlListTable)},e.prototype.buildListItem=function(i){var e=this,n=this.dataList[i],o=n.id.value,a=$("<a>").attr("class","item").appendTo(this.htmlListData);"string"==typeof this.linkPattern?a.attr("href",this.linkPattern.split("$model.id").join(o)):this.isSelectable===!0&&this.selectedItems.indexOf(o)>-1&&a.addClass("is-selected"),a.click(function(i){i.preventDefault(),e.isSelectable===!0?e.selectListItem(o):t.Url.openUrl(a.attr("href"))}),this.Model.get("columns").forEach(function(t,i){a.append(e.buildListItemColumn(i,t,n))}),this.htmlListItems[o]=a},e.prototype.buildListItemColumn=function(t,i,e){var n=$("<span>").text(e[i.name].text).attr("class","column");if(0===t){var o=$("<span>").attr("class","check").appendTo(n);$("<span>").attr("class","icon icon-tiny icon-lite icon-check").appendTo(o)}return n},e.prototype.buildListItems=function(){var t=this;this.htmlListItems={},this.htmlListData.empty(),this.dataList.forEach(function(i,e){t.viewList.indexOf(e)>-1&&t.buildListItem(e)})},e.prototype.buildListTable=function(){this.htmlListTable=$("<div>").attr("class","table").appendTo(this.htmlRoot)},e.prototype.buildSearchField=function(){var i=this,e=null,n=$("<div>").attr("class","search").insertBefore(this.htmlListData),o=$("<div>").attr("class","content theme-base").appendTo(n),a=$("<input>").attr("type","text").attr("placeholder",t.Locale.getText("datagrid_type_search")).prop("value",this.settingsData.query).appendTo(o),s=$("<a>").attr("class","reset").attr("title",t.Locale.getText("datagrid_reset_search")).click(function(t){t.preventDefault(),i.showSearch(!1,!1)}).appendTo(o);$("<span>").attr("class","icon icon-small icon-close").appendTo(s),a.change(function(t){i.filterDataItems(a.val())}),a.keydown(function(t){e&&window.clearTimeout(e),t.ctrlKey||27!==t.keyCode?e=window.setTimeout(function(){e=null,a.trigger("change")},250):(t.preventDefault(),i.showSearch(!1,!1))}),this.fldSearch=a},e.prototype.filterDataItems=function(t){if(this.lastQuery!==t){if(this.settingsData.query=t,this.storeSettings(),this.lastQuery=t,t=jQuery.trim(t.toLowerCase()),0===t.length)this.resetViewList();else{var i=[];this.dataList.forEach(function(e,n){for(var o in e)if(e[o].text.toLowerCase().indexOf(t)>-1){i.push(n);break}}),this.viewList=i}this.buildListItems()}},e.prototype.getSelectedItems=function(){return this.selectedItems},e.prototype.loadList=function(){var t=this;this.action("data",{},function(i){t.dataList=i,t.resetViewList(),t.updateListOrder(),t.settingsData.query.length>0&&t.filterDataItems(t.settingsData.query),t.buildListItems(),$(window).trigger("resize")})},e.prototype.loadSettings=function(){this.settingsId="datagrid-"+t.Url.getUid()+"-"+this.getId();var i=t.Session.get(this.settingsId);i.hasOwnProperty("order")&&(this.settingsData.order=i.order),i.hasOwnProperty("sort")&&(this.settingsData.sort=i.sort),i.hasOwnProperty("query")&&(this.settingsData.query=i.query)},e.prototype.refresh=function(){this.loadList()},e.prototype.resetViewList=function(){var t=[];this.dataList.forEach(function(i,e){t.push(e)}),this.viewList=t},e.prototype.selectListItem=function(t){var i=this.selectedItems.indexOf(t);i>-1?(this.selectedItems.splice(i,1),"undefined"!=typeof this.htmlListItems[t]&&this.htmlListItems[t].removeClass("is-selected")):(this.selectedItems.push(t),"undefined"!=typeof this.htmlListItems[t]&&this.htmlListItems[t].addClass("is-selected"),this.selectedLimit>0&&this.selectedItems.length>this.selectedLimit&&this.selectListItem(this.selectedItems[0]))},e.prototype.setColumnOrder=function(t){if(this.settingsData.order!==t){var i=this.settingsData.order;this.htmlListColumns[i].attr("class","column")}var e=this.settingsData.sort;this.htmlListColumns[t].attr("class","column sort-"+e),this.settingsData.order=t},e.prototype.setColumnSort=function(t){var i="asc";this.settingsData.order===t&&(i="asc"===this.settingsData.sort?"desc":"asc"),this.settingsData.sort=i},e.prototype.setSelectedItems=function(t){},e.prototype.showSearch=function(t,i){t===!0?(this.fldSearch instanceof Object||this.buildSearchField(),this.htmlRoot.removeClass("search-hidden").addClass("search-visible"),i===!0&&this.fldSearch.focus()):(this.fldSearch.val(""),this.filterDataItems(""),this.htmlRoot.removeClass("search-visible").addClass("search-hidden")),this.isSearchVisible=t},e.prototype.storeSettings=function(){t.Session.set(this.settingsId,this.settingsData)},e.prototype.updateListOrder=function(){var t=this.Model.getIndex("columns",this.settingsData.order),i=t.name,e=(t.type,"asc"===this.settingsData.sort?-1:1),n="asc"===this.settingsData.sort?1:-1;this.dataList.sort(function(t,o){var a=t[i].value,s=o[i].value;return s>a?e:a>s?n:0})},e}(t.Main.Component);i.DataGrid=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments),this.hasPicker=!1}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.buildField(),this.buildButton(),this.buildLine()},e.prototype.buildDatePicker=function(){var i=this;t.Page.loadVendor("jqueryui",function(){i.fldInput=$(i.fldInput),i.fldInput.datepicker(i.getDatePickerConfig()),i.fldInput.datepicker("show"),i.fldInput.blur(),i.hasPicker=!0})},e.prototype.buildButton=function(){var i=this,e=new t.Ui.Button({style:"field-icon",icon:"date"});e.setHandler("click",function(){i.hasPicker===!1?i.buildDatePicker():(i.fldInput.datepicker("show"),i.fldInput.blur())}),this.htmlField.append(e.build())},e.prototype.buildField=function(){var i=this;this.htmlField=$("<div>").attr("class","field").appendTo(this.htmlContent),this.fldInput=$("<input>").attr("type","text").attr("placeholder",this.Model.get("placeholder")).keyup(function(t){i.updateValueFromInput()}).change(function(t){i.updateValueFromInput()}).appendTo(this.htmlField),this.hasDateTimeFormat()===!0&&this.htmlField.addClass("has-datetime"),null!==this.getDataValue()&&(this.lastValue=t.Format.toDate(this.getDataValue(),this.Model.get("data_format")),this.fldInput.prop("value",this.lastValue))},e.prototype.buildLine=function(){$("<span>").attr("class","line").appendTo(this.htmlContent)},e.prototype.focus=function(){this.fldInput.focus()},e.prototype.getDatePickerConfig=function(){var i=this,e=this.Model.get("data_format");e=this.getDatePickerFormat(e);for(var n={showOn:"button",constrainInput:!1,dateFormat:e,dayNames:[],dayNamesMin:[],firstDay:t.Locale.getCalendar("first_weekday"),monthNames:[],nextText:t.Locale.getText("calendar_next_month"),prevText:t.Locale.getText("calendar_prev_month"),showWeek:t.Locale.getCalendar("show_weeks"),weekHeader:"",beforeShow:function(t,e){var n=i.getDataValue();if(n>0){var o=i.fldInput.val();i.fldInput.datepicker("setDate",new Date(1e3*o)),i.fldInput.val(o)}},onSelect:function(t,e){i.updateValueFromInput()},onClose:function(t,e){i.updateValueFromInput()}},o=0;6>=o;++o){var a=t.Locale.getText("calendar_day_"+o);n.dayNames.push(a),n.dayNamesMin.push(a.substring(0,1))}for(var s=1;12>=s;++s)n.monthNames.push(t.Locale.getText("calendar_month_"+s));return n},e.prototype.getDatePickerFormat=function(t){return t=t.replace("d","dd"),t=t.replace("m","mm"),t=t.replace("j","d"),t=t.replace("n","m"),t=t.replace("Y","yy"),t=t.replace("H","00"),t=t.replace("i","00")},e.prototype.updateValueFromInput=function(){var i=this.fldInput.val();if(this.lastValue===i)return!1;var e=t.Format.toTime(i);return i.length>0&&null===e?!1:(this.lastValue=i,this.setDataValue(e),!0)},e.prototype.getDataValue=function(){return this.Model.isNumber("data_value")?this.Model.get("data_value"):null},e.prototype.hasDateTimeFormat=function(){return this.Model.get("data_format").indexOf("H")>5},e.prototype.setDataValue=function(t){this.Model.set("data_value",t)},e}(t.Main.Field);i.DateTime=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.buildContent=function(){t.prototype.buildContent.call(this),this.Model.hasString("heading")&&this.buildHeading(),this.buildGraph(),this.buildGrid(),this.loadData()},i.prototype.buildHeading=function(){$("<div>").attr("class","heading").text(this.Model.get("heading")).appendTo(this.htmlRoot)},i.prototype.buildGraph=function(){this.htmlGraph=$("<div>").attr("class","graph").appendTo(this.htmlRoot)},i.prototype.buildGrid=function(){this.htmlGrid=$("<div>").attr("class","grid").appendTo(this.htmlGraph)},i.prototype.buildGridLines=function(t){var i=this;this.htmlGrid.empty(),this.htmlGrid.css("max-width",t.max_width),t.item_data.forEach(function(e,n){var o=$("<span>").attr("class","item").css("width",t.item_percent+"%").appendTo(i.htmlGrid);$("<span>").attr("class","value theme-text").text(e.value).appendTo(o),$("<span>").attr("class","label").text(e.label).appendTo(o)})},i.prototype.buildSvg=function(t){this.htmlSvg=this.createSvgElement("svg",{viewBox:"0 -5 "+t+" 110",width:t}),this.htmlGraph.get(0).appendChild(this.htmlSvg)},i.prototype.buildSvgDots=function(t){var i=this;t.item_data.forEach(function(t){i.htmlSvg.appendChild(i.createSvgElement("circle",{cx:t.x,cy:t.y,r:2,stroke:i.App.getThemeColor("base"),"stroke-width":1,fill:"#ffffff"}))})},i.prototype.buildSvgLine=function(t){for(;this.htmlSvg.firstChild;)this.htmlSvg.removeChild(this.htmlSvg.firstChild);var i=this.createSvgElement("polyline",{fill:"none",stroke:this.App.getThemeColor("base"),"stroke-width":1,points:t.item_points.join(" ")});this.htmlSvg.appendChild(i)},i.prototype.createSvgElement=function(t,i){var e=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in i)e.setAttribute(n,i[n]);return e},i.prototype.loadData=function(){var t=this;this.action("data",{},function(i){t.htmlSvg instanceof Element&&t.htmlSvg.parentNode.removeChild(t.htmlSvg),t.buildSvg(i.max_width),t.buildGridLines(i),t.buildSvgLine(i),t.buildSvgDots(i)})},i}(t.Main.Component);i.GraphWidget=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.isTable()?this.buildTable():this.buildList()},e.prototype.buildComponent=function(i){var e=new t.Model.DataItem(i),n=e.get("type_name");e.set("tab_name",this.Model.get("tab_name"));var o=new t.Ui.Component[n](this.App,this.View,e),a=o.build();return this.View.addComponent(o),a},e.prototype.buildList=function(){var t=this;this.Model.get("components").forEach(function(i){t.htmlContent.append(t.buildComponent(i))})},e.prototype.buildTable=function(){var t=this,i=this.Model.getNumber("columns"),e=this.Model.getList("components"),n=$("<div>").attr("class","row").appendTo(this.htmlContent);e.forEach(function(e,o){o%i===0&&(n=$("<div>").attr("class","row").appendTo(t.htmlContent)),n.append(t.buildComponent(e))});for(var o=e.length;o%i!==0;++o){var a=$("<div>").addClass("tinycar-main-component").addClass("tinycar-main-field").appendTo(n);$("<div>").attr("class","type-label").appendTo(a)}},e.prototype.getRootStyles=function(){var t=i.prototype.getRootStyles.call(this);return t.push("layout-"+this.Model.get("layout")),t.push("columns-"+this.Model.get("columns")),t},e.prototype.isTable=function(){return"table"===this.Model.get("layout")&&this.Model.getNumber("columns")>1},e}(t.Main.Field);i.Group=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=t.Main,n=t.Ui,o=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.buildContent=function(){this.buildList(),this.buildItems()},i.prototype.buildItems=function(){var t=this;this.action("data",{},function(i){i.forEach(function(i){var e=new n.Main.Icon({path:{app:i.id,view:"default"},label:i.name,color:i.color,icon:i.icon});t.htmlList.append(e.build())})})},i.prototype.buildList=function(){this.htmlList=$("<div>").attr("class","list").appendTo(this.htmlRoot)},i}(e.Component);i.IconListView=o}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.buildContent=function(){t.prototype.buildContent.call(this),this.buildImage()},i.prototype.buildImage=function(){$("<img>").attr("src",this.Model.get("image_data")).attr("class","image").appendTo(this.htmlRoot)},i}(t.Main.Component);i.Image=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.Model.hasString("heading")&&this.buildHeading(),this.buildList(),this.Model.isObject("link")&&(this.linkPattern=t.Url.getAsPath(this.Model.get("link"))),this.loadList()},e.prototype.buildHeading=function(){$("<div>").attr("class","heading").text(this.Model.get("heading")).appendTo(this.htmlRoot)},e.prototype.buildList=function(){this.htmlList=$("<div>").attr("class","list").appendTo(this.htmlRoot)},e.prototype.buildListItem=function(i){var e,n=this,o=i.id.value;"string"==typeof this.linkPattern?(e=$("<a>").attr("href",this.linkPattern.split("$item.id").join(o)).attr("class","item").appendTo(this.htmlList),e.click(function(i){i.ctrlKey===!1&&i.shiftKey===!1&&(i.preventDefault(),t.Url.openUrl(e.attr("href")))})):e=$("<span>").attr("class","item").appendTo(this.htmlList),this.Model.get("columns").forEach(function(t){e.append(n.buildListItemColumn(t,i))})},e.prototype.buildListItemColumn=function(t,i){var e=$("<span>").text(i[t.name].text).attr("class","column");return t.width>0&&e.css("width",t.width),e},e.prototype.loadList=function(){var t=this;this.action("data",{},function(i){t.htmlList.empty(),i.forEach(function(i){t.buildListItem(i)})})},e.prototype.refresh=function(){this.loadList()},e}(t.Main.Component);i.ListWidget=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.buildList()},e.prototype.buildList=function(){var t=this,i=$("<div>").attr("class","list").appendTo(this.htmlRoot);this.Model.get("options").forEach(function(e){i.append(t.buildListItem(e))})},e.prototype.buildListItem=function(i){var e=t.Url.getWithVars(this.Model.getObject("link"),{url:t.Url.getParams(),item:{name:i.name}}),n=$("<a>").attr("href",t.Url.getAsPath(e)).attr("class","item").text(i.label);return t.Url.isPathMatch(e)&&n.addClass("is-active"),n.click(function(i){i.ctrlKey===!1&&i.shiftKey===!1&&(i.preventDefault(),t.Url.openUrl(n.attr("href")))}),n},e}(t.Main.Component);i.NavigationList=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.buildContent=function(){t.prototype.buildContent.call(this),this.Model.hasString("heading")&&this.buildHeading(),this.buildList(),this.loadList()},i.prototype.buildHeading=function(){$("<div>").attr("class","heading").text(this.Model.get("heading")).appendTo(this.htmlRoot)},i.prototype.buildList=function(){this.htmlList=$("<div>").attr("class","list").appendTo(this.htmlRoot)},i.prototype.buildListItem=function(t,i){var e=$("<div>").addClass("item");return $("<span>").attr("class","value theme-text").text(i.value).appendTo(e),$("<span>").attr("class","label").text(t.label).appendTo(e),e},i.prototype.loadList=function(){var t=this;this.action("data",{},function(i){t.htmlList.empty();var e=0,n=t.Model.getObject("options");for(var o in n)i.hasOwnProperty(o)&&(++e,t.htmlList.append(t.buildListItem(n[o],i[o])));t.htmlRoot.addClass("options-"+e)})},i}(t.Main.Component);i.NumbersWidget=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.buildContent=function(){t.prototype.buildContent.call(this),this.buildInput(),this.initListeners()},i.prototype.buildInput=function(){this.fldInput=$("<input>").attr("id",this.getFieldId()).attr("type","password").attr("placeholder",this.Model.getString("placeholder")).appendTo(this.htmlContent)},i.prototype.focus=function(){this.fldInput.focus()},i.prototype.initListeners=function(){var t=this,i=null;this.fldInput.change(function(i){t.setDataValue(t.fldInput.val())}),this.fldInput.keyup(function(e){i&&window.clearTimeout(i),i=window.setTimeout(function(){t.fldInput.trigger("change")},300)})},i}(t.Main.Field);i.Password=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments),this.fldOptions=[]}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.buildOptions(),this.updateOptions()},e.prototype.buildOption=function(i){
var e=this,n=$("<div>").attr("class","item"),o=$("<input>").attr("id",this.getFieldId(i.name)).attr("name",this.getFieldId()).attr("type","radio").attr("value",i.name).appendTo(n);o.change(function(t){e.setDataValue(o.val())});var a=$("<label>").attr("for",this.getFieldId(i.name)).appendTo(n),s=$("<span>").attr("class","mark").appendTo(a);if($("<span>").attr("class","point").appendTo(s),$("<span>").attr("class","label").text(i.label).appendTo(a),"string"==typeof i.help){var r=new t.Ui.Main.Help(i.help);n.append(r.build())}return"string"==typeof i.instructions&&$("<div>").attr("class","instructions").text(i.instructions).appendTo(n),this.fldOptions.push(o),n},e.prototype.buildOptions=function(){var t=this;this.Model.get("options").forEach(function(i){t.htmlContent.append(t.buildOption(i))})},e.prototype.getRootStyles=function(){var t=i.prototype.getRootStyles.call(this);return t.push("layout-"+this.Model.get("layout")),t},e.prototype.updateOptions=function(){var t=""+this.getDataValue();this.fldOptions.forEach(function(i){i.prop("checked",i.val()===t)})},e}(t.Main.Field);i.RadioList=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments),this.htmlItems={}}return __extends(e,i),e.prototype.addListItem=function(t){var i=this,e=t.id;for(var n in t);var o=$("<div>").attr("class","item").text(t[n]).appendTo(this.htmlList),a=$("<a>").attr("class","close").click(function(t){t.preventDefault(),i.clearListItem(e)}).appendTo(o);$("<span>").attr("class","icon icon-tiny icon-close").appendTo(a),this.htmlItems[e]=o},e.prototype.buildButton=function(){var i=this,e=new t.Ui.Button({style:"theme-icon",icon:"menu-horizontal",size:"tiny"});e.setHandler("click",function(){var t=i.App.openDialog(i.Model.get("data_dialog"));t.addDataForComponentType("DataGrid",{data_value:i.Model.getList("data_value"),data_limit:i.Model.getNumber("data_limit")}),t.setHandler("values",function(){return i.getDataValue()}),t.setHandler("select",function(t){i.setDataValue(t),i.updateListItems()})}),this.htmlContent.append(e.build())},e.prototype.buildContent=function(){i.prototype.buildContent.call(this),this.buildListItems(),this.buildButton()},e.prototype.buildListItems=function(){var t=this;this.htmlList=$("<div>").attr("class","list").appendTo(this.htmlContent),this.Model.get("type_items").forEach(function(i){t.addListItem(i)})},e.prototype.clearListItem=function(t){"undefined"!=typeof this.htmlItems[t]&&(this.htmlItems[t].remove(),delete this.htmlItems[t])},e.prototype.getDataValue=function(){return this.Model.getList("data_value")},e.prototype.setDataValue=function(t){this.Model.set("data_value",t)},e.prototype.updateListItems=function(){var t=this;this.action("data",{value:this.getDataValue()},function(i){t.htmlItems={},t.htmlList.empty(),i.forEach(function(i){t.addListItem(i)})})},e}(t.Main.Field);i.Reference=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildContent=function(){var e=this;i.prototype.buildContent.call(this),this.buildEditor(),t.Page.loadVendor("trumbowyg",function(){e.initEditor()})},e.prototype.buildEditor=function(){this.htmlEditor=$("<textarea>").attr("class","editor").attr("placeholder",this.Model.get("placeholder")).prop("spellcheck",!1).prop("value",this.getDataValue()).appendTo(this.htmlContent)},e.prototype.initEditor=function(){var t=this;this.htmlEditor.trumbowyg({removeformatPasted:!0}),$("div.trumbowyg-editor:first").prop("spellcheck",!1),this.htmlEditor.on("tbwchange",function(){t.setDataValue(t.htmlEditor.trumbowyg("html"))})},e.prototype.focus=function(){this.htmlEditor.focus()},e}(t.Main.Field);i.RichText=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.buildContent=function(){t.prototype.buildContent.call(this),this.buildList()},i.prototype.buildList=function(){var t=this,i=$("<div>").attr("class","list").appendTo(this.htmlContent);$("<span>").attr("class","icon icon-small icon-sort-down").appendTo(i),this.fldList=$("<select>").attr("size",1).appendTo(i);var e=this.Model.get("options");e.forEach(function(i){$("<option>").attr("value",i.name).text(i.label).appendTo(t.fldList)}),this.fldList.change(function(i){t.setDataValue(t.fldList.val())}),null===this.Model.get("data_value")&&e.length>0&&this.Model.set("data_value",e[0].name),null!==this.Model.get("data_value")&&this.fldList.val(this.Model.get("data_value"))},i.prototype.focus=function(){this.fldList.focus()},i}(t.Main.Field);i.SelectList=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments),this.htmlItems={}}return __extends(e,i),e.prototype.addItemFromField=function(){var t=jQuery.trim(this.fldInput.val());if(!this.buildListItem(t))return!1;var i=this.getDataValue();return i.push(t),this.setDataValue(i),this.fldInput.val("").focus(),!0},e.prototype.buildContent=function(){var t=this;i.prototype.buildContent.call(this),this.buildList(),this.buildInput(),this.getDataValue().forEach(function(i){t.buildListItem(i)})},e.prototype.buildField=function(){this.htmlField=$("<div>").attr("class","field").appendTo(this.htmlContent)},e.prototype.buildList=function(){this.htmlList=$("<div>").attr("class","list").appendTo(this.htmlContent)},e.prototype.buildListItem=function(t){var i=this;if(0===t.length)return!1;var e=t.toLowerCase();this.htmlItems.hasOwnProperty(e)&&this.clearListItem(e);var n=$("<div>").attr("class","item").text(t).insertBefore(this.htmlField),o=$("<a>").attr("class","close").mousedown(function(t){t.preventDefault()}).click(function(t){t.preventDefault(),i.clearListItem(e)}).appendTo(n);return $("<span>").attr("class","icon icon-tiny icon-close").appendTo(o),this.htmlItems[e]=n,!0},e.prototype.buildInput=function(){var i=this;this.htmlField=$("<div>").attr("class","field").appendTo(this.htmlList),this.fldInput=$("<input>").attr("type","text").attr("placeholder",this.Model.getString("placeholder")).keydown(function(t){13===t.keyCode&&(t.preventDefault(),i.addItemFromField())}).appendTo(this.htmlField);var e=new t.Ui.Button({style:"field-icon",icon:"add"});e.setHandler("click",function(){i.addItemFromField()}),this.htmlField.append(e.build())},e.prototype.clearListItem=function(t){if(!this.htmlItems.hasOwnProperty(t))return!1;var i=this.htmlItems[t].text();this.htmlItems[t].remove(),delete this.htmlItems[t];var e=this.getDataValue(),n=e.indexOf(i);return n>-1&&e.splice(n,1),this.setDataValue(e),!0},e.prototype.focus=function(){this.fldInput.focus()},e.prototype.getDataValue=function(){return this.Model.getList("data_value")},e.prototype.setDataValue=function(t){this.Model.set("data_value",t)},e}(t.Main.Field);i.TagsList=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildContent=function(){this.buildTable(),this.linkPattern=t.Url.getAsPath(this.Model.getObject("link")),this.loadList()},e.prototype.buildData=function(t){var i=this;t.forEach(function(t){i.buildDataItem(t)})},e.prototype.buildDataItem=function(i){var e=this.linkPattern.split("$model.id").join(i.id),n=$("<a>").attr("href",e).attr("class","item").click(function(i){i.preventDefault(),t.Url.openUrl(e)}).appendTo(this.htmlTable);$("<span>").attr("class","image").css("background-color",i.image_color).css("background-image","url("+i.image_data+")").appendTo(n),$("<span>").attr("class","label").text(i.label).appendTo(n),$("<span>").attr("class","description").text(i.description).appendTo(n),$("<span>").attr("class","status status-"+i.status_type).text(i.status_label).appendTo(n)},e.prototype.buildTable=function(){this.htmlTable=$("<div>").attr("class","table").appendTo(this.htmlRoot)},e.prototype.loadList=function(){var t=this;this.action("data",{},function(i){t.buildData(i)})},e}(t.Main.Component);i.TileGrid=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(i){function e(){i.apply(this,arguments)}return __extends(e,i),e.prototype.buildContent=function(){i.prototype.buildContent.call(this),null===this.getDataValue()?this.buildPlaceholder():this.hasLink()?this.buildLink():this.buildText()},e.prototype.buildLink=function(){var i=this.Model.isObject("link_path")?t.Url.getAsPath(this.Model.get("link_path")):this.Model.get("link_url"),e=$("<a>").attr("href",i).attr("class","link").appendTo(this.htmlContent);$("<span>").attr("class","label").html(this.getDataValue()).appendTo(e),$("<span>").attr("class","icon icon-tiny icon-arrow-right").appendTo(e),e.click(function(i){i.ctrlKey===!1&&i.shiftKey===!1&&t.Page.setState("unloading")})},e.prototype.buildPlaceholder=function(){var t=this.Model.getString("placeholder");0===t.length&&(t="&nbsp;"),$("<span>").attr("class","text placeholder").html(t).appendTo(this.htmlContent)},e.prototype.buildText=function(){$("<span>").attr("class","text").html(this.getDataValue()).appendTo(this.htmlContent)},e.prototype.hasLink=function(){return this.Model.isObject("link_path")||this.Model.hasString("link_url")},e}(t.Main.Field);i.Text=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.buildContent=function(){this.buildText()},i.prototype.buildText=function(){$("<div>").attr("class","text").html(this.Model.get("text")).appendTo(this.htmlRoot)},i}(t.Main.Component);i.TextContent=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(t){function i(){t.apply(this,arguments),this.minAreaHeight=0}return __extends(i,t),i.prototype.buildContent=function(){t.prototype.buildContent.call(this),this.Model.get("rows")>0?this.buildArea():this.buildInput(),this.initListeners()},i.prototype.buildArea=function(){this.isArea=!0,this.fldInput=$("<textarea>").attr("id",this.getFieldId()).attr("placeholder",this.Model.getString("placeholder")).prop("spellcheck",!1).prop("value",this.getDataValue()).appendTo(this.htmlContent),this.Model.get("maxlength")>0&&this.fldInput.prop("maxlength",this.Model.get("maxlength")),this.minAreaHeight=23*this.Model.getNumber("rows")},i.prototype.buildInput=function(){this.isArea=!1,this.fldInput=$("<input>").attr("id",this.getFieldId()).attr("type","text").attr("placeholder",this.Model.getString("placeholder")).prop("spellcheck",!1).prop("value",this.getDataValue()).appendTo(this.htmlContent),this.Model.get("maxlength")>0&&this.fldInput.prop("maxlength",this.Model.get("maxlength"))},i.prototype.getVerticalFieldPadding=function(){return this.fldInput.innerHeight()-this.fldInput.height()},i.prototype.fitHeightToContent=function(t){this.fldInput.css("height","auto"),this.fldInput.height(Math.max(this.minAreaHeight,this.fldInput.prop("scrollHeight")-t))},i.prototype.focus=function(){this.fldInput.focus()},i.prototype.initListeners=function(){var t=this,i=this.getVerticalFieldPadding();this.fldInput.on("input",function(e){var n=t.fldInput.val();t.setDataValue(n),t.isArea&&t.fitHeightToContent(i)})},i.prototype.setDataValue=function(i){t.prototype.setDataValue.call(this,i),this.fldInput.val(i);var e=this.Model.hasString("data_value");this.hasValue!==e&&(this.hasValue=e,this.callHandler("value",this.hasValue))},i.prototype.start=function(){t.prototype.start.call(this),this.hasValue=this.Model.hasString("data_value"),this.callHandler("value",this.hasValue),this.isArea&&this.fitHeightToContent(this.getVerticalFieldPadding())},i}(t.Main.Field);i.TextInput=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.buildContent=function(){t.prototype.buildContent.call(this),this.buildToggle()},i.prototype.buildToggle=function(){var t=this,i=$("<a>").attr("href","#toggle").attr("class","toggle").appendTo(this.htmlContent);$("<span>").attr("class","icon icon-lite icon-tiny icon-check").appendTo(i);var e=$("<span>").attr("class","handle").appendTo(i);$("<span>").attr("class","icon icon-tiny icon-handle").appendTo(e),this.getDataValue()===!0&&(i.addClass("is-active"),this.isTypeEnabled()===!0&&i.addClass("theme-base-lite")),i.click(function(e){e.preventDefault(),1==t.isTypeEnabled()&&(i.toggleClass("is-active"),i.toggleClass("theme-base-lite"),t.setDataValue(!(t.getDataValue()===!0)))})},i}(t.Main.Field);i.Toggle=e}(e=i.Component||(i.Component={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(t){var i;!function(t){var i=function(){function t(t){this.isContentVisible=!1,this.contentText=jQuery.trim(t)}return t.prototype.build=function(){return this.buildRoot(),this.buildLink(),this.htmlRoot},t.prototype.buildContent=function(){this.htmlContent=$("<div>").attr("class","tinycar-ui-main-help-content").text(this.contentText).appendTo(document.body)},t.prototype.buildLink=function(){var t=this,i=$("<a>").attr("href","#help").attr("class","link").click(function(i){i.preventDefault(),t.toggleContent()}).appendTo(this.htmlRoot);$("<span>").attr("class","icon icon-tiny icon-help").appendTo(i)},t.prototype.buildRoot=function(){this.htmlRoot=$("<span>").attr("class","tinycar-ui-main-help")},t.prototype.hideContent=function(){this.htmlRoot.removeClass("is-open"),this.htmlContent.hide(),this.isContentVisible=!1},t.prototype.showContent=function(){var t=this;this.htmlContent instanceof Object||this.buildContent();var i=this.htmlRoot.offset();this.htmlContent.css({left:i.left,top:i.top}),this.htmlContent.show(),this.htmlRoot.addClass("is-open");var e=function(){$(window).unbind("click",e),$(window).unbind("resize",n),t.hideContent()},n=function(t){e()};window.setTimeout(function(){$(window).bind("click",e),$(window).bind("resize",n)},10),this.isContentVisible=!0},t.prototype.toggleContent=function(){this.isContentVisible===!0?this.hideContent():this.showContent()},t}();t.Help=i}(i=t.Main||(t.Main={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=t.Model,n=function(){function i(t){this.Model=new e.DataItem(t)}return i.prototype.build=function(){return this.buildRoot(),this.buildIcon(),this.buildLabel(),this.htmlRoot},i.prototype.buildIcon=function(){$("<span>").attr("class","icon").css("background-color",this.Model.get("color")).css("background-image","url("+this.Model.get("icon")+")").appendTo(this.htmlRoot)},i.prototype.buildLabel=function(){$("<span>").attr("class","label").text(this.Model.get("label")).appendTo(this.htmlRoot)},i.prototype.buildRoot=function(){var i=this;this.htmlRoot=$("<a>").attr("class","tinycar-ui-main-icon").attr("href",t.Url.getAsPath(this.Model.get("path"))),this.htmlRoot.click(function(e){e.preventDefault(),t.Url.openUrl(i.htmlRoot.attr("href"))})},i}();i.Icon=n}(e=i.Main||(i.Main={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e;!function(i){var e=function(){function i(t,i){this.defaultWidth=0,this.handlerList={},this.maxCollapse=0,this.maxWidth=0,this.minCollapse=0,this.minWidth=0,this.resizeStartX=0,this.resizeTouch=!1,this.settingsId="sidebar",this.settingsData={width:0},this.settingsId=t,this.parentNode=i}return i.prototype.build=function(){return this.loadSettings(),this.buildRoot(),this.initListeners(),this.settingsData.width>0&&this.initWidth(),this.htmlRoot},i.prototype.buildRoot=function(){this.htmlRoot=$("<a>").attr("class","tinycar-ui-main-resizegap"),$("<span>").attr("class","line").appendTo(this.htmlRoot)},i.prototype.callHandler=function(t,i){this.handlerList.hasOwnProperty(t)&&this.handlerList[t](i)},i.prototype.getAsCollapseWidth=function(t){return this.minCollapse>0&&t<=this.minCollapse&&(t=this.minWidth),this.maxCollapse>0&&t>=this.maxCollapse&&(t=this.maxWidth),t},i.prototype.getAsParentWidth=function(t){return t=Math.max(this.minWidth,t),this.maxWidth>0&&(t=Math.min(this.maxWidth,t)),t},i.prototype.initListeners=function(){var t=this,i=function(i){t.onResizeStart(i),$(document).bind("mousemove",e),$(document).bind("touchmove",e),$(document).bind("mouseup",n),$(document).bind("touchcancel",n),$(document).bind("touchstop",n)},e=function(i){t.onResizeMove(i)},n=function(i){t.onResizeStop(i),$(document).unbind("mousemove",e),$(document).unbind("touchmove",e),$(document).unbind("mouseup",n),$(document).unbind("touchcancel",n),$(document).unbind("touchstop",n)};this.htmlRoot.bind("mousedown",i),this.htmlRoot.bind("touchstart",i)},i.prototype.initWidth=function(){var t=this.getAsCollapseWidth(this.getAsParentWidth(this.settingsData.width));this.parentNode.css("width",t),t>this.minWidth&&this.parentNode.addClass("width-expanded"),this.callHandler("resized",t)},i.prototype.loadSettings=function(){var i=t.Session.get(this.settingsId);this.settingsData.width=this.defaultWidth>0?this.defaultWidth:this.minWidth,i.hasOwnProperty("width")&&(this.settingsData.width=parseFloat(i.width))},i.prototype.onResizeStart=function(i){i.preventDefault(),this.parentWidth=this.parentNode.outerWidth(),this.resizeWidth=this.parentWidth,i.originalEvent.hasOwnProperty("touches")?(this.resizeTouch=!0,this.resizeStartX=i.originalEvent.touchers[0].pageX):(this.resizeTouch=!1,this.resizeStartX=i.pageX),t.System.Mask.showAsSkin("ew-resize"),this.htmlRoot.addClass("is-resizing")},i.prototype.onResizeMove=function(t){var i=this.resizeTouch?t.originalEvent.touchers[0].pageX:t.pageX,e=this.resizeStartX-i,n=this.parentWidth-e;n=this.getAsParentWidth(n),n!==this.resizeWidth&&(this.resizeWidth=n,this.parentNode.css("width",n),this.callHandler("resizing",this.resizeWidth))},i.prototype.onResizeStop=function(i){var e=this.parentWidth;this.parentWidth=this.getAsCollapseWidth(this.resizeWidth),this.resizeWidth!==this.parentWidth&&this.parentNode.css("width",this.parentWidth),e>this.minWidth&&this.parentWidth===this.minWidth?this.parentNode.removeClass("width-expanded"):e===this.minWidth&&this.parentWidth>this.minWidth&&this.parentNode.addClass("width-expanded"),t.System.Mask.hide(),this.htmlRoot.removeClass("is-resizing"),this.storeSettings({width:this.parentWidth}),this.callHandler("resized",this.parentWidth)},i.prototype.setDefaultWidth=function(t){this.defaultWidth=t},i.prototype.setHandler=function(t,i){this.handlerList[t]=i},i.prototype.setMaxCollapse=function(t){this.maxCollapse=t},i.prototype.setMaxWidth=function(t){this.maxWidth=t},i.prototype.setMinCollapse=function(t){this.minCollapse=t},i.prototype.setMinWidth=function(t){this.minWidth=t},i.prototype.storeSettings=function(i){for(var e in i)this.settingsData[e]=i[e];t.Session.set(this.settingsId,this.settingsData)},i}();i.ResizeGap=e}(e=i.Main||(i.Main={}))}(i=t.Ui||(t.Ui={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(i){var e=function(){function i(t){this.Model=t}return i.prototype.build=function(){return this.buildRoot(),this.buildHeading(),this.buildDetails(),this.backLink instanceof Object&&this.buildBackButton(),this.htmlRoot},i.prototype.buildBackButton=function(){var i=new t.Ui.Button({style:"dark-icon",icon:"back",link:this.backLink});this.htmlRoot.append(i.build()),this.htmlRoot.addClass("has-back")},i.prototype.buildDetails=function(){var t=[];if(this.Model.hasString("details_line")?t.push(this.Model.get("details_line")):(this.Model.hasNumber("created_time")&&t.push(this.getDateLabel("created_time")),this.Model.hasNumber("modified_time")&&t.push(this.getDateLabel("modified_time"))),t.length>0){var i=$("<div>").attr("class","details").appendTo(this.htmlRoot);t.forEach(function(t){$("<span>").text(t).appendTo(i)})}},i.prototype.buildHeading=function(){$("<strong>").text(this.Model.get("heading")).appendTo(this.htmlRoot)},i.prototype.buildRoot=function(){this.htmlRoot=$("<div>").attr("class","tinycar-view-heading")},i.prototype.getDateLabel=function(i){var e=t.Locale.toDate(this.Model.get(i),"datetime");return t.Locale.getText("view_"+i,{time:e})},i.prototype.setBackLink=function(t){this.backLink=t},i}();i.Heading=e}(i=t.View||(t.View={}))}(Tinycar||(Tinycar={}));var Tinycar;!function(t){var i;!function(t){var i=function(){function t(t){this.htmlTabs={},this.tabList=[],this.tabNames=[],this.View=t}return t.prototype.addItem=function(t){this.tabList.push(t)},t.prototype.build=function(){var t=this;return this.buildRoot(),this.buildLine(),this.tabList.forEach(function(i){t.buildItem(i)}),this.htmlRoot},t.prototype.buildItem=function(t){var i=this,e=$("<a>").attr("class","item").text(t.label).appendTo(this.htmlRoot);e.click(function(e){e.preventDefault(),i.View.showTab(t.name)}),this.tabNames.push(t.name),this.htmlTabs[t.name]=e},t.prototype.buildLine=function(){$("<span>").attr("class","line").appendTo(this.htmlRoot)},t.prototype.buildRoot=function(){this.htmlRoot=$("<div>").attr("class","tinycar-view-tabs")},t.prototype.getFirstTab=function(){return this.tabNames.length>0?this.tabNames[0]:"default"},t.prototype.getActiveTab=function(){return this.activeTab},t.prototype.setActiveTab=function(t){"string"==typeof this.activeTab&&this.htmlTabs[this.activeTab].removeClass("is-active").removeClass("theme-border"),this.activeTab=t,this.htmlTabs.hasOwnProperty(t)&&this.htmlTabs[this.activeTab].addClass("is-active").addClass("theme-border")},t}();t.Tabs=i}(i=t.View||(t.View={}))}(Tinycar||(Tinycar={}));